{% extends "base.html" %}

{% block title %}Обучение и правила — Битва за территорию{% endblock %}

{% block extra_head %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; }
body { font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, 'Times New Roman', serif; }

.rules-page {
    min-height: 100vh;
    background: #3d2914 linear-gradient(180deg, rgba(61,41,20,0.97) 0%, #2c1810 50%, #1a0f08 100%);
    padding: 20px;
    color: #e8dcc4;
    position: relative;
}
.rules-page::before {
    content: '';
    position: fixed;
    inset: 0;
    background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
}
.rules-page > * { position: relative; z-index: 1; }

.rules-inner {
    max-width: 680px;
    margin: 0 auto;
}

.rules-page h1 {
    font-family: 'Cinzel Decorative', 'Cinzel', Georgia, serif;
    text-align: center;
    margin: 0 0 8px;
    font-size: 1.8rem;
    font-weight: 700;
    color: #d4a84b;
    text-shadow: 0 0 20px rgba(212,168,75,0.3), 0 2px 4px rgba(0,0,0,0.5);
    letter-spacing: 0.08em;
}

.rules-intro {
    text-align: center;
    color: #b8a088;
    margin-bottom: 28px;
    font-size: 1rem;
}

.rules-nav {
    margin-bottom: 24px;
}
.rules-nav a {
    color: #d4a84b;
    text-decoration: none;
    font-weight: bold;
    padding: 10px 18px;
    background: linear-gradient(145deg, #4a3520 0%, #3d2914 100%);
    border: 2px solid #5c4033;
    border-radius: 4px;
    font-family: 'Cinzel', Georgia, serif;
    font-size: 0.9rem;
    display: inline-block;
    transition: color 0.2s, border-color 0.2s;
}
.rules-nav a:hover {
    color: #e8c86a;
    border-color: #8b6914;
}

.rules-block {
    background: linear-gradient(145deg, #4a3520 0%, #3d2914 100%);
    border: 2px solid #5c4033;
    border-radius: 8px;
    padding: 24px;
    margin-bottom: 20px;
    box-shadow: inset 0 1px 0 rgba(212,168,75,0.12), 0 4px 12px rgba(0,0,0,0.35);
    display: flex;
    flex-direction: row;
    gap: 24px;
    align-items: flex-start;
}

.rules-block:nth-child(even) {
    flex-direction: row-reverse;
}

.rules-block-img {
    flex-shrink: 0;
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(212,168,75,0.15);
    border-radius: 12px;
    border: 2px solid #5c4033;
}
.rules-block-img svg {
    width: 48px;
    height: 48px;
    fill: #d4a84b;
}

.rules-block-content h3 {
    font-family: 'Cinzel', Georgia, serif;
    color: #d4a84b;
    margin: 0 0 10px;
    font-size: 1.1rem;
}
.rules-block-content p {
    margin: 0;
    line-height: 1.6;
    color: #e8dcc4;
    font-size: 0.95rem;
}

@media (max-width: 600px) {
    .rules-page { padding: 12px; }
    .rules-page h1 { font-size: 1.4rem; }
    .rules-block {
        flex-direction: column !important;
        padding: 18px;
        gap: 16px;
    }
    .rules-block-img {
        width: 64px;
        height: 64px;
    }
    .rules-block-img svg {
        width: 36px;
        height: 36px;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="rules-page">
    <div class="rules-inner">
        <nav class="rules-nav">
            <a href="{{ url_for('territory_battle_page') }}">← Битва за территорию</a>
        </nav>

        <h1>Битва за территорию</h1>
        <p class="rules-intro">Обучение и правила игры</p>

        <div class="rules-block">
            <div class="rules-block-img">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            </div>
            <div class="rules-block-content">
                <h3>Шаг 1. Зарегистрируйтесь</h3>
                <p>Войдите в игру под своим аккаунтом. Если у вас ещё нет учётной записи — зарегистрируйтесь. Без авторизации вы сможете только просматривать карту, но не участвовать в битве.</p>
            </div>
        </div>

        <div class="rules-block">
            <div class="rules-block-img">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-2 15l-4-4 1.41-1.41L10 14.17l4.59-4.58L16 11l-6 6z"/></svg>
            </div>
            <div class="rules-block-content">
                <h3>Шаг 2. Создайте или вступите в клан</h3>
                <p>Битва идёт между кланами. Зайдите в личный кабинет и создайте свой клан или подайте заявку на вступление в существующий. Без клана участвовать в захвате территорий нельзя.</p>
            </div>
        </div>

        <div class="rules-block">
            <div class="rules-block-img">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
            </div>
            <div class="rules-block-content">
                <h3>Прокачка игрока</h3>
                <p>У каждого игрока есть уровень, <strong>атака</strong> и <strong>защита</strong>. Решая задачи, вы получаете опыт и повышаете уровень. Награды за задания увеличивают атаку и защиту. Чем выше характеристики — тем больше ваш вклад в захват и удержание территорий для клана.</p>
            </div>
        </div>

        <div class="rules-block">
            <div class="rules-block-img">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"/></svg>
            </div>
            <div class="rules-block-content">
                <h3>Основная цель</h3>
                <p>Захватывайте области на карте для своего клана! Каждая область имеет «силу» от 0 до 1000. Клан, набравший больше всего силы в области, контролирует её. Побеждает клан, который контролирует больше всего территорий к концу битвы.</p>
            </div>
        </div>

        <div class="rules-block">
            <div class="rules-block-img">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
            </div>
            <div class="rules-block-content">
                <h3>Как захватывать</h3>
                <p>Нажмите на область на карте и решите математическую задачу. За каждый правильный ответ вы тратите 1 единицу энергии и добавляете силу своему клану в этой области (или уменьшаете силу чужого клана). Энергия восстанавливается каждые 30 минут.</p>
            </div>
        </div>

        <div class="rules-block">
            <div class="rules-block-img">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            </div>
            <div class="rules-block-content">
                <h3>Защита территорий</h3>
                <p>Если область принадлежит вашему клану — правильные ответы укрепляют её. Если область чужая — вы атакуете и снижаете силу врага. Некоторые области могут быть заблокированы и недоступны для захвата.</p>
            </div>
        </div>

        <div class="rules-block">
            <div class="rules-block-img">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
            </div>
            <div class="rules-block-content">
                <h3>Время проведения</h3>
                <p>Битва может иметь время старта и окончания. До старта вы увидите обратный отсчёт. Во время битвы отображается таймер до конца. После окончания подводятся итоги — следите за топом кланов!</p>
            </div>
        </div>

        <nav class="rules-nav">
            <a href="{{ url_for('territory_battle_page') }}">← На карту</a>
        </nav>
    </div>
</div>
{% endblock %}
